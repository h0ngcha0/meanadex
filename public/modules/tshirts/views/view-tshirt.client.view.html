<div data-ng-init="loadAllVariantsInTableData()">
  <div class="page-header">
    <h3 data-ng-bind="tshirt.name"></h3>
  </div>

  <form class="form-horizontal" novalidate>
    <fieldset>
      <div class="form-group">
        <div class="col-md-12">
          <div class="col-md-6" data-ng-if="tshirt.editFrontImg">
            <label class="control-label" for="fimage">Front image</label>
            <md-image-upload uploader="frontUploader"
                             current-queue-item="currentQueueItemFront"
                             on-image-upload="onFrontImgUpload()"
                             display-upload="true">
            </md-image-upload>
          </div>
          <div class="col-md-6" data-ng-if="!tshirt.editFrontImg">
            <label class="control-label" for="fimage">Front image</label>
            <button class="btn btn-primary btn-xs"
               data-ng-click="onFrontImgEdit()">
              <span class="glyphicon glyphicon-edit"></span>
              edit
            </button>
            <hr/>
            <img id="fimage"
                 data-ng-src="{{tshirt.frontImage.url}}"
                 width="50%"/>
          </div>

          <div class="col-md-6" data-ng-if="tshirt.editBackImg">
            <label class="control-label" for="bimage">Back image</label>
            <md-image-upload uploader="backUploader"
                             current-queue-item="currentQueueItemBack"
                             on-image-upload="onBackImgUpload()"
                             display-upload="true">
            </md-image-upload>
          </div>
          <div class="col-md-6" data-ng-if="!tshirt.editBackImg">
            <label class="control-label" for="bimage">Back image</label>
            <button class="btn btn-primary btn-xs"
               data-ng-click="onBackImgEdit()">
              <span class="glyphicon glyphicon-edit"></span>
              edit
            </button>
            <hr/>
            <img id="bimage"
                 data-ng-src="{{tshirt.backImage.url}}"
                 width="50%"/>
          </div>
        </div>

        <hr/>
        <div class="col-md-12">
          <label class="control-label">Edit variants</label>
          <table ng-table="variantsTableParams" show-filter="false"
                 class="table table-bordered">
            <tr ng-repeat="variant in $data">
              <td data-title="'Name'">
                <span ng-if="!variant.$edit">{{variant.name}}</span>
                <div ng-if="variant.$edit">
                  <input class="form-control" type="text" ng-model="variant.name" />
                </div>
              </td>
              <td data-title="'Description'">
                <span ng-if="!variant.$edit">{{variant.description}}</span>
                <div ng-if="variant.$edit">
                  <input class="form-control" type="text" ng-model="variant.description" />
                </div>
              </td>
              <td data-title="'Base cost'">
                <span ng-if="!variant.$edit">{{variant.baseCost}}</span>
                <div ng-if="variant.$edit">
                  <input class="form-control" type="text" ng-model="variant.baseCost" />
                </div>
              </td>
              <td data-title="'Unit'">
                <span ng-if="!variant.$edit">{{variant.unit}}</span>
                <div ng-if="variant.$edit">
                  <input class="form-control" type="text" ng-model="variant.unit" />
                </div>
              </td>
              <td data-title="'Colors'">
                <md-tshirt-color-editor variant="variant"
                                        removecolor="removeVariantColor"
                                        addcolor="addVariantColor">
                </md-tshirt-color-editor>
              </td>
              <td data-title="'Actions'" width="150">
                <a data-ng-if="!variant.$edit" href=""
                   class="btn btn-primary"
                   data-ng-click="onVariantEdit(variant)">
                  <i class="glyphicon glyphicon-edit"></i>
                </a>
                <a ng-if="variant.$edit"
                   class="btn btn-primary btn-xs"
                   data-ng-click="onVariantSave(variant)">Save</a>
                <a class="btn btn-primary" data-ng-click="onVariantRemove(variant);">
                  <i class="glyphicon glyphicon-trash"></i>
                </a>
              </td>
            </tr>
          </table>
        </div>
        <hr/>
        <button class="btn btn-default" data-ng-click="addTshirtVariant()">
          New variant
        </button>
        <div class="pull-right" data-ng-show="authentication.user._id == tshirt.user._id">
          <a class="btn btn-primary" data-ng-click="remove();">
            <i class="glyphicon glyphicon-trash"></i>
          </a>
        </div>

      </div>
    </fieldset>
    <div data-ng-show="error" class="text-danger">
      <strong data-ng-bind="error"></strong>
    </div>
  </form>
  <small>
    <em class="text-muted">
      Posted on
      <span data-ng-bind="tshirt.created | date:'mediumDate'"></span>
      by
      <span data-ng-bind="tshirt.user.displayName"></span>
    </em>
  </small>
</div>
